!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("babel-runtime/core-js/object/get-prototype-of"),require("babel-runtime/helpers/classCallCheck"),require("babel-runtime/helpers/possibleConstructorReturn"),require("babel-runtime/helpers/inherits"),require("babel-runtime/core-js/object/keys"),require("babel-runtime/helpers/createClass"),require("babel-runtime/helpers/get"),require("babel-runtime/core-js/promise"),require("babel-runtime/core-js/get-iterator"),require("babel-runtime/core-js/object/assign"),require("aurelia-cookie"),require("aurelia-http-client"),require("aurelia-pal-browser"),require("urijs"),require("babel-runtime/helpers/slicedToArray"),require("babel-runtime/core-js/object/entries"),require("babel-runtime/core-js/json/stringify"));else if("function"==typeof define&&define.amd)define(["babel-runtime/core-js/object/get-prototype-of","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/possibleConstructorReturn","babel-runtime/helpers/inherits","babel-runtime/core-js/object/keys","babel-runtime/helpers/createClass","babel-runtime/helpers/get","babel-runtime/core-js/promise","babel-runtime/core-js/get-iterator","babel-runtime/core-js/object/assign","aurelia-cookie","aurelia-http-client","aurelia-pal-browser","urijs","babel-runtime/helpers/slicedToArray","babel-runtime/core-js/object/entries","babel-runtime/core-js/json/stringify"],t);else{var r="object"==typeof exports?t(require("babel-runtime/core-js/object/get-prototype-of"),require("babel-runtime/helpers/classCallCheck"),require("babel-runtime/helpers/possibleConstructorReturn"),require("babel-runtime/helpers/inherits"),require("babel-runtime/core-js/object/keys"),require("babel-runtime/helpers/createClass"),require("babel-runtime/helpers/get"),require("babel-runtime/core-js/promise"),require("babel-runtime/core-js/get-iterator"),require("babel-runtime/core-js/object/assign"),require("aurelia-cookie"),require("aurelia-http-client"),require("aurelia-pal-browser"),require("urijs"),require("babel-runtime/helpers/slicedToArray"),require("babel-runtime/core-js/object/entries"),require("babel-runtime/core-js/json/stringify")):t(e["babel-runtime/core-js/object/get-prototype-of"],e["babel-runtime/helpers/classCallCheck"],e["babel-runtime/helpers/possibleConstructorReturn"],e["babel-runtime/helpers/inherits"],e["babel-runtime/core-js/object/keys"],e["babel-runtime/helpers/createClass"],e["babel-runtime/helpers/get"],e["babel-runtime/core-js/promise"],e["babel-runtime/core-js/get-iterator"],e["babel-runtime/core-js/object/assign"],e["aurelia-cookie"],e["aurelia-http-client"],e["aurelia-pal-browser"],e.urijs,e["babel-runtime/helpers/slicedToArray"],e["babel-runtime/core-js/object/entries"],e["babel-runtime/core-js/json/stringify"]);for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(e,t,r,i,u,n,a,s,o,l,c,f,d,b,h,p,v){return function(e){function t(i){if(r[i])return r[i].exports;var u=r[i]={exports:{},id:i,loaded:!1};return e[i].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="/static/",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=t.CrudConsumerObject=t.CrudConsumer=t.ConsumerObject=void 0;var i=r(1);Object.defineProperty(t,"ConsumerObject",{enumerable:!0,get:function(){return i.ConsumerObject}});var u=r(9);Object.defineProperty(t,"CrudConsumer",{enumerable:!0,get:function(){return u.CrudConsumer}});var n=r(22);Object.defineProperty(t,"CrudConsumerObject",{enumerable:!0,get:function(){return n.CrudConsumerObject}});var a=r(24);t.default=a.Consumer,t.Consumer=a.Consumer},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsumerObject=void 0;var u=r(2),n=i(u),a=r(3),s=i(a),o=r(4),l=i(o),c=r(5),f=i(c),d=r(6);t.ConsumerObject=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),t}(d.AbstractConsumerObject)},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConsumerObject=void 0;var u=r(7),n=i(u),a=r(3),s=i(a),o=r(8),l=i(o);t.AbstractConsumerObject=function(){function e(t,r){(0,s.default)(this,e),this.createFromObject(t),this.__consumer__=r}return(0,l.default)(e,[{key:"createFromObject",value:function(e){var t=(0,n.default)(e);for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];this[i]=e[i]}}}]),e}()},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CrudConsumer=void 0;var u=r(2),n=i(u),a=r(3),s=i(a),o=r(8),l=i(o),c=r(4),f=i(c),d=r(10),b=i(d),h=r(5),p=i(h),v=r(11),m=r(22);t.CrudConsumer=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.CrudConsumerObject,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e,r,i));return u.unserializableFields.push("__initial_state__"),u}return(0,p.default)(t,e),(0,l.default)(t,[{key:"create",value:function(e){return(0,b.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"post",this).call(this,"",e)}},{key:"read",value:function(e){return(0,b.default)(t.prototype.__proto__||(0,n.default)(t.prototype),"get",this).call(this,e)}}]),t}(v.AbstractConsumer)},function(e,t){e.exports=require("babel-runtime/helpers/get")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConsumer=void 0;var u=r(12),n=i(u),a=r(7),s=i(a),o=r(13),l=i(o),c=r(14),f=i(c),d=r(3),b=i(d),h=r(8),p=i(h),v=r(15),m=r(16),y=r(17),_=r(18),j=i(_),C=r(19);t.AbstractConsumer=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,b.default)(this,e),this.client=new m.HttpClient,this.contentType="application/json",this.csrfCookie="csrftoken",this.csrfHeader="X-CSRFToken",this.defaultHeaders={},this.defaultParameters={},this.endpoint=t,this.objectClass=r,this.parserDataPath="",this.unserializableFields=["__consumer__"],i&&(0,f.default)(this,i),(0,y.initialize)()}return(0,p.default)(e,[{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=j.default.build({path:e,query:j.default.buildQuery(t)});return this.request("delete",r,{})}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=j.default.build({path:e+"",query:j.default.buildQuery(t)});return this.request("get",r,{})}},{key:"patch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=j.default.build({path:e,query:j.default.buildQuery(r)});return this.request("patch",i,t)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=j.default.build({path:e,query:j.default.buildQuery(r)});return this.request("post",i,t)}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=j.default.build({path:e,query:j.default.buildQuery(r)});return this.request("put",i,t)}},{key:"request",value:function(e,t,r){var i=this,u=void 0,n=void 0;this.client.configure(function(e){e.withBaseUrl(i.endpoint)}),this.addHeader("Content-Type",this.contentType),!this.isSafeMethod(e)&&this.csrfCookie&&this.csrfHeader&&this.addCsrfToken();var a=!0,o=!1,c=void 0;try{for(var f,d=(0,l.default)((0,s.default)(this.defaultHeaders));!(a=(f=d.next()).done);a=!0){var b=f.value;this.addHeader(b,this.defaultHeaders[b])}}catch(e){o=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw c}}var h=(0,j.default)(t);return h.addQuery(this.defaultParameters),r=this.serialize(r),u=this.client[e](h.toString(),r),n=u.then(this.requestSuccess.bind(this)).catch(this.requestFailed.bind(this)),n.abort=u.abort,n.cancel=u.cancel,n}},{key:"isSafeMethod",value:function(e){var t=["GET","HEAD","OPTIONS","TRACE"];return t.indexOf(e.toUpperCase())>-1}},{key:"addCsrfToken",value:function(){var e=this.getCookie(this.csrfCookie);this.defaultHeaders[this.csrfHeader]=e,this.addHeader(this.csrfHeader,e)}},{key:"getCookie",value:function(e){return v.AureliaCookie.get(e)}},{key:"addHeader",value:function(e,t){this.client.configure(function(r){r.withHeader(e,t)})}},{key:"serialize",value:function(e){return(0,C.isObject)(e)?(0,C.excludeUnserializableFields)(e,this.unserializableFields):e}},{key:"requestSuccess",value:function(e){var t=this.parse(e.response);return n.default.resolve(t)}},{key:"parse",value:function(e){if(e){var t=JSON.parse(e);if(this.parserDataPath.length){var r=this.parserDataPath.split(".");r.map(function(e){t=t[e]})}return Array.isArray(t)?this.parseList(t):this.parseScalar(t)}}},{key:"parseList",value:function(e){var t=[],r=!0,i=!1,u=void 0;try{for(var n,a=(0,l.default)(e);!(r=(n=a.next()).done);r=!0){var s=n.value;t.push(this.parseEntity(s))}}catch(e){i=!0,u=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw u}}return t}},{key:"parseScalar",value:function(e){return this.parseEntity(e)}},{key:"parseEntity",value:function(e){return new this.objectClass(e,this)}},{key:"requestFailed",value:function(e){return n.default.reject(e)}}]),e}()},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("babel-runtime/core-js/get-iterator")},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=require("aurelia-cookie")},function(e,t){e.exports=require("aurelia-http-client")},function(e,t){e.exports=require("aurelia-pal-browser")},function(e,t){e.exports=require("urijs")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r={},i=!0,n=!1,s=void 0;try{for(var o,l=(0,h.default)((0,d.default)(t));!(i=(o=l.next()).done);i=!0){var c=o.value,f=e?e[c]:null,b=t[c];if(Array.isArray(b)){var p=u(b,f);if(!(0,d.default)(p).length)continue;r[c]=b}else if(a(b)){var v=u(f,b);if(!(0,d.default)(v).length)continue;r[c]=v}else{if(b===f)continue;r[c]=b}}}catch(e){n=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}var m=!0,y=!1,_=void 0;try{for(var j,C=(0,h.default)((0,d.default)(e));!(m=(j=C.next()).done);m=!0){var g=j.value,q=t[g];q||(r[g]=null)}}catch(e){y=!0,_=e}finally{try{!m&&C.return&&C.return()}finally{if(y)throw _}}return r}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__consumer__.unserializableFields,r={},i=!0,u=!1,n=void 0;try{for(var a,s=(0,h.default)((0,c.default)(e));!(i=(a=s.next()).done);i=!0){var l=(0,o.default)(a.value,2),f=l[0],d=l[1];t.indexOf(f)>-1||(r[f]=d)}}catch(e){u=!0,n=e}finally{try{!i&&s.return&&s.return()}finally{if(u)throw n}}return r}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(20),o=i(s),l=r(21),c=i(l),f=r(7),d=i(f),b=r(13),h=i(b);t.diff=u,t.excludeUnserializableFields=n,t.isObject=a},function(e,t){e.exports=require("babel-runtime/helpers/slicedToArray")},function(e,t){e.exports=require("babel-runtime/core-js/object/entries")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CrudConsumerObject=void 0;var u=r(20),n=i(u),a=r(21),s=i(a),o=r(13),l=i(o),c=r(12),f=i(c),d=r(7),b=i(d),h=r(23),p=i(h),v=r(2),m=i(v),y=r(3),_=i(y),j=r(8),C=i(j),g=r(4),q=i(g),k=r(5),x=i(k),O=r(6),P=r(19);t.CrudConsumerObject=function(e){function t(e,r){(0,_.default)(this,t);var i=(0,q.default)(this,(t.__proto__||(0,m.default)(t)).call(this,e,r));return i.__initial_state__=JSON.parse((0,p.default)(e)),i}return(0,x.default)(t,e),(0,C.default)(t,[{key:"update",value:function(){var e=this,t=this.getPath(),r=(0,P.excludeUnserializableFields)(this),i=this.getChangedFields();if(!t)throw new Error("Can't determine path, please set pk or id or define getPath()");return 0===(0,b.default)(i).length?f.default.resolve(this):this.__consumer__.patch(t,i).then(function(){return e.__initial_state__=r,f.default.resolve(e)})}},{key:"save",value:function(){var e=this,t=this.getPath(),r=(0,P.excludeUnserializableFields)(this);if(!t)throw new Error("Can't determine path, please set pk or id or define getPath()");return this.__consumer__.put(t,this).then(function(){return e.__initial_state__=r,f.default.resolve(e)})}},{key:"delete",value:function(){var e=this.getPath();if(!e)throw new Error("Can't determine path, please set pk or id or define getPath()");return this.__consumer__.delete(e)}},{key:"getPath",value:function(){var e=this.getPK();return!!e&&e+""}},{key:"getPK",value:function(){return this.pk||this.id||!1}},{key:"getChangedFields",value:function(){var e={},t=!0,r=!1,i=void 0;try{for(var u,a=(0,l.default)((0,s.default)(this));!(t=(u=a.next()).done);t=!0){var o=(0,n.default)(u.value,2),c=o[0],f=o[1];this.__consumer__.unserializableFields.indexOf(c)>-1||(e[c]=f)}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}return(0,P.diff)(this.__initial_state__,(0,P.excludeUnserializableFields)(this))}}]),t}(O.AbstractConsumerObject)},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;var u=r(2),n=i(u),a=r(3),s=i(a),o=r(4),l=i(o),c=r(5),f=i(c),d=r(11);t.Consumer=function(e){function t(){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),t}(d.AbstractConsumer)}])});