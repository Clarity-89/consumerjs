!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("aurelia-cookie"),require("aurelia-http-client"),require("aurelia-pal-browser"),require("urijs"));else if("function"==typeof define&&define.amd)define(["aurelia-cookie","aurelia-http-client","aurelia-pal-browser","urijs"],t);else{var r="object"==typeof exports?t(require("aurelia-cookie"),require("aurelia-http-client"),require("aurelia-pal-browser"),require("urijs")):t(e["aurelia-cookie"],e["aurelia-http-client"],e["aurelia-pal-browser"],e.urijs);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="/static/",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=t.CrudConsumerObject=t.CrudConsumer=t.ConsumerObject=void 0;var n=r(1);Object.defineProperty(t,"ConsumerObject",{enumerable:!0,get:function(){return n.ConsumerObject}});var i=r(3);Object.defineProperty(t,"CrudConsumer",{enumerable:!0,get:function(){return i.CrudConsumer}});var o=r(9);Object.defineProperty(t,"CrudConsumerObject",{enumerable:!0,get:function(){return o.CrudConsumerObject}});var u=r(10);t.default=u.Consumer,t.Consumer=u.Consumer},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsumerObject=void 0;var u=r(2);t.ConsumerObject=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.AbstractConsumerObject)},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.AbstractConsumerObject=function(){function e(t,n){r(this,e),this.createFromObject(t),this.__consumer__=n}return n(e,[{key:"createFromObject",value:function(e){var t=Object.keys(e);for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];this[n]=e[n]}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CrudConsumer=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(n)},s=r(4);t.CrudConsumer=function(e){function t(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o));return u.objectClass=r,u.unserializableFields.push("__initial_state__"),u}return o(t,e),u(t,[{key:"create",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"post",this).call(this,"",e)}},{key:"read",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this,e)}}]),t}(s.AbstractConsumer)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConsumer=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),a=r(6),s=r(7),c=r(8),l=n(c);t.AbstractConsumer=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this.client=new a.HttpClient,this.contentType="application/json",this.csrfCookie="csrftoken",this.csrfHeader="X-CSRFToken",this.defaultHeaders={},this.defaultParameters={},this.endpoint=t,this.objectClass=r,this.parserDataPath="",this.unserializableFields=["__consumer__"],n&&Object.assign(this,n),(0,s.initialize)()}return o(e,[{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.default.build({path:e,query:l.default.buildQuery(t)});return this.request("delete",r,{})}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.default.build({path:e+"",query:l.default.buildQuery(t)});return this.request("get",r,{})}},{key:"patch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.default.build({path:e,query:l.default.buildQuery(r)});return this.request("patch",n,t)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.default.build({path:e,query:l.default.buildQuery(r)});return this.request("post",n,t)}},{key:"put",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=l.default.build({path:e,query:l.default.buildQuery(r)});return this.request("put",n,t)}},{key:"request",value:function(e,t,r){var n=this,i=void 0,o=void 0;this.client.configure(function(e){e.withBaseUrl(n.endpoint)}),this.addHeader("Content-Type",this.contentType),!this.isSafeMethod(e)&&this.csrfCookie&&this.csrfHeader&&this.addCsrfToken();var u=!0,a=!1,s=void 0;try{for(var c,f=Object.keys(this.defaultHeaders)[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var p=c.value;this.addHeader(p,this.defaultHeaders[p])}}catch(e){a=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(a)throw s}}var h=(0,l.default)(t);return h.addQuery(this.defaultParameters),r=this.serialize(r),i=this.client[e](h.toString(),r),o=i.then(this.requestSuccess.bind(this)).catch(this.requestFailed.bind(this)),o.abort=i.abort,o.cancel=i.cancel,o}},{key:"isSafeMethod",value:function(e){var t=["GET","HEAD","OPTIONS","TRACE"];return t.includes(e.toUpperCase())}},{key:"addCsrfToken",value:function(){var e=this.getCookie(this.csrfCookie);this.defaultHeaders[this.csrfHeader]=e,this.addHeader(this.csrfHeader,e)}},{key:"getCookie",value:function(e){return u.Cookie.get(e)}},{key:"addHeader",value:function(e,t){this.client.configure(function(r){r.withHeader(e,t)})}},{key:"serialize",value:function(e){if(!this.isObject(e))return e;var t={},r=!0,n=!1,i=void 0;try{for(var o,u=Object.keys(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;this.unserializableFields.includes(a)||(t[a]=e[a])}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}return t}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"requestSuccess",value:function(e){var t=this.parse(e.response);return Promise.resolve(t)}},{key:"parse",value:function(e){if(e){var t=JSON.parse(e);if(this.parserDataPath.length){var r=this.parserDataPath.split(".");r.map(function(e){t=t[e]})}return Array.isArray(t)?this.parseList(t):this.parseScalar(t)}}},{key:"parseList",value:function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;t.push(this.parseEntity(a))}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}return t}},{key:"parseScalar",value:function(e){return this.parseEntity(e)}},{key:"parseEntity",value:function(e){return new this.objectClass(e,this)}},{key:"requestFailed",value:function(e){return Promise.reject(e)}}]),e}()},function(e,t){e.exports=require("aurelia-cookie")},function(e,t){e.exports=require("aurelia-http-client")},function(e,t){e.exports=require("aurelia-pal-browser")},function(e,t){e.exports=require("urijs")},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CrudConsumerObject=void 0;var u=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2);t.CrudConsumerObject=function(e){function t(e,r){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.__initial_state__=e,o}return o(t,e),a(t,[{key:"update",value:function(){var e=this,t=this.getPath(),r=this,n=this.getChangedFields();if(!t)throw new Error("Can't determine path, please set pk or id or define getPath()");return 0===Object.keys(n).length?Promise.resolve(this):this.__consumer__.patch(t,n).then(function(){e.__initial_state__=r})}},{key:"save",value:function(){var e=this,t=this.getPath(),r=this;if(!t)throw new Error("Can't determine path, please set pk or id or define getPath()");return this.__consumer__.put(t,this).then(function(){e.__initial_state__=r})}},{key:"delete",value:function(){var e=this.getPath();if(!e)throw new Error("Can't determine path, please set pk or id or define getPath()");return this.__consumer__.delete(e)}},{key:"getPath",value:function(){var e=this.getPK();return!!e&&e+""}},{key:"getPK",value:function(){return this.pk||this.id||!1}},{key:"getChangedFields",value:function(){var e={},t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(this)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=u(i.value,2),s=a[0],c=a[1];this.__consumer__.unserializableFields.indexOf(s)>-1||c!==this.__initial_state__[s]&&(e[s]=c)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e}}]),t}(s.AbstractConsumerObject)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;var u=r(4);t.Consumer=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.AbstractConsumer)}])});